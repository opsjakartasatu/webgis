<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Jakarta</title>

    <!-- Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://js.arcgis.com/4.29/"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers" />
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media" />
    <link rel="shortcut icon" href="assets/images/icon.png" />

    <!-- FontAwesome JS-->
    <script defer src="assets/plugins/fontawesome/js/all.min.js"></script>

    <!-- App CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/portal.css" />

    <style>
      th {
        cursor: pointer;
        position: relative;
      }
      .sort-icon {
        margin-left: 5px;
        color: gray;
      }
    </style>
  </head>

  <body class="app">
    <header class="app-header fixed-top">
      <div class="app-header-inner">
        <div class="container-fluid py-2">
          <div class="app-header-content">
            <div class="row justify-content-between align-items-center">
              <div class="col-auto">
                <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block d-xl-none" href="#">
                  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img">
                    <title>Menu</title>
                    <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path>
                  </svg>
                </a>
              </div>
              <!--//col-->
              <div class="search-mobile-trigger d-sm-none col">
                <i class="search-mobile-trigger-icon fa-solid fa-magnifying-glass"></i>
              </div>
              <!--//col-->
              <div class="app-title-box col">
                <h3 class="website-title">Title...</h3>
              </div>
              <!--//app-search-box-->
              <div class="app-utilities col-auto">
                <!--//app-utility-item-->
                <div class="app-utility-item app-user-dropdown dropdown">
                  <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"><img src="assets/images/user_1.png" alt="user profile" /></a>
                  <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">
                    <li><a class="dropdown-item" href="login.html">Log In</a></li>
                    <li><a class="dropdown-item" href="#">Log Out</a></li>
                    <!-- <li><hr class="dropdown-divider" /></li> -->
                  </ul>
                </div>
                <!--//app-user-dropdown-->
              </div>
              <!--//app-utilities-->
            </div>
            <!--//row-->
          </div>
          <!--//app-header-content-->
        </div>
        <!--//container-fluid-->
      </div>
      <!--//app-header-inner-->
      <div id="app-sidepanel" class="app-sidepanel">
        <div id="sidepanel-drop" class="sidepanel-drop"></div>
        <div class="sidepanel-inner d-flex flex-column">
          <a href="#" id="sidepanel-close" class="sidepanel-close d-xl-none">&times;</a>
          <div class="app-branding">
            <a class="app-logo" href="index.html"><img class="logo-icon me-2" src="assets/images/jkt1.png" alt="logo" /><span class="logo-text">JAKARTA SATU</span></a>
          </div>
          <!--//app-branding-->

          <nav id="app-nav-main" class="app-nav app-nav-main flex-grow-1">
            <ul class="app-menu list-unstyled accordion" id="menu-accordion">
              <li class="nav-item">
                <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
                <a class="nav-link" href="index.html">
                  <span class="nav-icon">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-house-door" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path
                        fill-rule="evenodd"
                        d="M7.646 1.146a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5H9.5a.5.5 0 0 1-.5-.5v-4H7v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6zM2.5 7.707V14H6v-4a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4h3.5V7.707L8 2.207l-5.5 5.5z"
                      />
                      <path fill-rule="evenodd" d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z" />
                    </svg>
                  </span>
                  <span class="nav-link-text">Beranda</span>
                </a>
                <!--//nav-link-->
              </li>
              <!--//nav-item-->
              <li class="nav-item">
                <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
                <a class="nav-link" href="peta.html">
                  <span class="nav-icon">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-map" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path
                        fill-rule="evenodd"
                        d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.5.5 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103M10 1.91l-4-.8v12.98l4 .8zm1 12.98 4-.8V1.11l-4 .8zm-6-.8V1.11l-4 .8v12.98z"
                      />
                    </svg>
                  </span>
                  <span class="nav-link-text">Peta</span>
                </a>
                <!--//nav-link-->
              </li>
              <!--//nav-item-->
              <li class="nav-item">
                <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
                <a class="nav-link active" href="informasi.html">
                  <span class="nav-icon">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-card-list" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path
                        fill-rule="evenodd"
                        d="M14.5 3h-13a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"
                      />
                      <path fill-rule="evenodd" d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5z" />
                      <circle cx="3.5" cy="5.5" r=".5" />
                      <circle cx="3.5" cy="8" r=".5" />
                      <circle cx="3.5" cy="10.5" r=".5" />
                    </svg>
                  </span>
                  <span class="nav-link-text">Informasi</span>
                </a>
                <!--//nav-link-->
              </li>
              <!--//nav-item-->
            </ul>
            <!--//app-menu-->
          </nav>
          <!--//app-sidepanel-footer-->
        </div>
        <!--//sidepanel-inner-->
      </div>
      <!--//app-sidepanel-->
    </header>
    <!--//app-header-->

    <div class="app-wrapper">
      <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">
          <div class="row g-3 mb-4 align-items-center justify-content-between">
            <div class="col-auto">
              <h1 class="app-page-title mb-0">Informasi</h1>
            </div>
            <div class="col-auto">
              <div class="page-utilities">
                <div class="row g-2 justify-content-start justify-content-md-end align-items-center">
                  <div class="col-auto">
                    <form class="table-search-form row gx-1 align-items-center">
                      <div class="col-auto">
                        <input type="text" id="search-orders" name="searchorders" class="form-control search-orders" placeholder="Search" />
                      </div>
                      <div class="col-auto">
                        <button type="submit" class="btn app-btn-secondary">Search</button>
                      </div>
                    </form>
                  </div>
                  <!--//col-->
                  <div class="col-auto">
                    <select class="form-select w-auto">
                      <option selected value="option-1">All</option>
                      <option value="option-2">This week</option>
                      <option value="option-3">This month</option>
                      <option value="option-4">Last 3 months</option>
                    </select>
                  </div>
                  <div class="col-auto">
                    <a class="btn app-btn-secondary" href="#">
                      <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-download me-1" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                        <path fill-rule="evenodd" d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z" />
                      </svg>
                      Download CSV
                    </a>
                  </div>
                </div>
                <!--//row-->
              </div>
              <!--//table-utilities-->
            </div>
            <!--//col-auto-->
          </div>
          <!--//row-->

          <!-- <nav id="orders-table-tab" class="orders-table-tab app-nav-tabs nav shadow-sm flex-column flex-sm-row mb-4">
            <a class="flex-sm-fill text-sm-center nav-link active" id="orders-all-tab" data-bs-toggle="tab" href="#orders-all" role="tab" aria-controls="orders-all" aria-selected="true">All</a>
            <a class="flex-sm-fill text-sm-center nav-link" id="orders-paid-tab" data-bs-toggle="tab" href="#orders-paid" role="tab" aria-controls="orders-paid" aria-selected="false">Paid</a>
            <a class="flex-sm-fill text-sm-center nav-link" id="orders-pending-tab" data-bs-toggle="tab" href="#orders-pending" role="tab" aria-controls="orders-pending" aria-selected="false">Pending</a>
            <a class="flex-sm-fill text-sm-center nav-link" id="orders-cancelled-tab" data-bs-toggle="tab" href="#orders-cancelled" role="tab" aria-controls="orders-cancelled" aria-selected="false">Cancelled</a>
          </nav> -->

          <div class="tab-content" id="orders-table-tab-content">
            <div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
              <div class="app-card app-card-orders-table shadow-sm mb-5">
                <div class="app-card-body">
                  <div class="table-responsive">
                    <table class="table app-table-hover mb-0 text-left">
                      <thead>
                        <tr>
                          <th class="cell">No <i class="fas fa-sort sort-icon" id="sortIconNo" onclick="sortTable('no')"></i></th>
                          <th class="cell">Kelurahan <i class="fas fa-sort sort-icon" id="sortIconKelurahan" onclick="sortTable('wadmkd')"></i></th>
                          <th class="cell">KK Laki-Laki <i class="fas fa-sort sort-icon" id="sortIconKkLakiLaki" onclick="sortTable('kk_laki_laki')"></i></th>
                          <th class="cell">KK Perempuan <i class="fas fa-sort sort-icon" id="sortIconKkPerempuan" onclick="sortTable('kk_perempuan')"></i></th>
                          <th class="cell">KK Laki-Laki & Perempuan <i class="fas fa-sort sort-icon" id="sortIconKkLakiPerempuan" onclick="sortTable('kk_laki_perempuan')"></i></th>
                          <!-- <th class="cell"></th> -->
                        </tr>
                      </thead>
                      <tbody id="tableBody"></tbody>
                    </table>
                  </div>
                  <!--//table-responsive-->
                </div>
                <!--//app-card-body-->
              </div>
              <!--//app-card-->
              <nav class="app-pagination">
                <ul class="pagination justify-content-center" id="pagination">
                  <li class="page-item disabled" id="prevPage">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                  </li>
                  <!-- Page numbers will be populated here by JavaScript -->
                  <li class="page-item" id="nextPage">
                    <a class="page-link" href="#">Next</a>
                  </li>
                </ul>
              </nav>
              <!--//app-pagination-->
            </div>
            <!--//tab-pane-->
          </div>
          <!--//tab-content-->
        </div>
        <!--//container-fluid-->
      </div>
      <!--//app-content-->

      <footer class="app-footer">
        <div class="container text-center py-3">
          <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
          <small class="copyright">Hak Cipta 2020. Pemerintah Provinsi Daerah Khusus Ibukota Jakarta. </small>
        </div>
      </footer>
      <!--//app-footer-->
    </div>
    <!--//app-wrapper-->

    <script>
      require(["esri/layers/FeatureLayer"], function (FeatureLayer) {
        var featureLayer = new FeatureLayer({
          url: "https://tataruang.jakarta.go.id/server/rest/services/Hosted/Kependudukan_Jakpus/FeatureServer/0", // Ganti dengan URL layer fitur Anda
        });

        var features = [];
        var currentPage = 1;
        var rowsPerPage = 10;
        var sortOrder = { key: "", ascending: true };

        featureLayer
          .queryFeatures()
          .then(function (results) {
            features = results.features;
            displayTable(currentPage);
            setupPagination();
          })
          .catch(function (error) {
            console.error("Error querying features: ", error);
          });

        function displayTable(page) {
          var tableBody = document.getElementById("tableBody");
          tableBody.innerHTML = "";
          var start = (page - 1) * rowsPerPage;
          var end = start + rowsPerPage;
          var paginatedFeatures = features.slice(start, end);

          paginatedFeatures.forEach(function (feature, index) {
            var attributes = feature.attributes;
            var row = document.createElement("tr");

            var cellNo = document.createElement("td");
            cellNo.classList.add("cell");
            cellNo.textContent = "#" + (start + index + 1);
            row.appendChild(cellNo);

            var cellwadmkd = document.createElement("td");
            cellwadmkd.classList.add("cell");
            cellwadmkd.innerHTML = attributes["wadmkd"]; // Ganti YOUR_PRODUCT_FIELD dengan nama field yang sesuai
            row.appendChild(cellwadmkd);

            var cellkk_l = document.createElement("td");
            cellkk_l.classList.add("cell");
            cellkk_l.textContent = attributes["kk_l"]; // Ganti YOUR_PRICE_FIELD dengan nama field yang sesuai
            row.appendChild(cellkk_l);

            var cellkk_p = document.createElement("td");
            cellkk_p.classList.add("cell");
            cellkk_p.textContent = attributes["kk_p"]; // Ganti YOUR_QUANTITY_FIELD dengan nama field yang sesuai
            row.appendChild(cellkk_p);

            var cellkk_lp = document.createElement("td");
            cellkk_lp.classList.add("cell");
            cellkk_lp.textContent = attributes["kk_lp"]; // Ganti YOUR_QUANTITY_FIELD dengan nama field yang sesuai
            row.appendChild(cellkk_lp);

            tableBody.appendChild(row);
          });
        }

        function setupPagination() {
          var pagination = document.getElementById("pagination");
          var pageCount = Math.ceil(features.length / rowsPerPage);

          for (var i = 1; i <= pageCount; i++) {
            var pageItem = document.createElement("li");
            pageItem.classList.add("page-item");
            if (i === currentPage) {
              pageItem.classList.add("active");
            }
            var pageLink = document.createElement("a");
            pageLink.classList.add("page-link");
            pageLink.href = "#";
            pageLink.textContent = i;
            pageLink.onclick = (function (page) {
              return function () {
                currentPage = page;
                displayTable(page);
                updatePagination();
              };
            })(i);
            pageItem.appendChild(pageLink);
            pagination.insertBefore(pageItem, document.getElementById("nextPage"));
          }
        }

        function updatePagination() {
          var pageItems = document.querySelectorAll(".pagination .page-item");
          pageItems.forEach(function (item) {
            item.classList.remove("active");
          });
          pageItems[currentPage].classList.add("active");

          document.getElementById("prevPage").classList.toggle("disabled", currentPage === 1);
          document.getElementById("nextPage").classList.toggle("disabled", currentPage === pageItems.length - 2);
        }

        document.getElementById("prevPage").onclick = function () {
          if (currentPage > 1) {
            currentPage--;
            displayTable(currentPage);
            updatePagination();
          }
        };

        document.getElementById("nextPage").onclick = function () {
          var pageCount = Math.ceil(features.length / rowsPerPage);
          if (currentPage < pageCount) {
            currentPage++;
            displayTable(currentPage);
            updatePagination();
          }
        };

        window.sortTable = function (key) {
          if (sortOrder.key === key) {
            sortOrder.ascending = !sortOrder.ascending;
          } else {
            sortOrder.key = key;
            sortOrder.ascending = true;
          }
          features.sort(function (a, b) {
            var aValue = a.attributes[key];
            var bValue = b.attributes[key];
            if (aValue < bValue) return sortOrder.ascending ? -1 : 1;
            if (aValue > bValue) return sortOrder.ascending ? 1 : -1;
            return 0;
          });
          displayTable(currentPage);
        };
      });
    </script>

    <!-- Javascript -->
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- Page Specific JS -->
    <script src="assets/js/app.js"></script>
  </body>
</html>
